window.addEventListener('DOMContentLoaded', () => {
  const canvas = document.getElementById('smiley');
  const ctx = canvas.getContext('2d');
  const moodSlider = document.getElementById('moodSlider');

  function drawFace(mood) {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Face
    ctx.beginPath();
    ctx.arc(150, 150, 100, 0, Math.PI * 2);
    ctx.fillStyle = 'hsl(90, 80%, 60%)'; // green face
    ctx.fill();
    ctx.stroke();

    // Eyes
    ctx.beginPath();
    ctx.arc(110, 120, 10, 0, Math.PI * 2);
    ctx.arc(190, 120, 10, 0, Math.PI * 2);
    ctx.fillStyle = '#000';
    ctx.fill();

    // Smile or Frown
    ctx.beginPath();
    const arcY = 170 - 20 * mood; // Moves the smile up or down
    const startAngle = 0;
    const endAngle = Math.PI;

    ctx.arc(150, arcY, 50, startAngle, endAngle, mood < 0); // flip if frowning
    ctx.stroke();
  }

  // Initial draw
  drawFace(moodSlider.value);

  // Update on slider change
  moodSlider.addEventListener('input', () => {
    drawFace(parseFloat(moodSlider.value));
  });
});
